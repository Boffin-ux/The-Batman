(()=>{"use strict";const t=(t,e)=>{const i=document.querySelector(".modal"),s=document.querySelector(".main__button-play");let n="";const o=e=>{e.preventDefault();const s=i.querySelector(".modal__inner");s.innerHTML='\n         <iframe width="100%" height="100%" src="" title="YouTube video player" frameborder="0"\n         allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"\n         allowfullscreen></iframe>\n      ',n=s.querySelector("iframe"),n.src=(t=>({id01:"https://www.youtube.com/embed/Sdp6VL_NBnY",id02:"https://www.youtube.com/embed/g8Y_GL5h7Fs",id03:"https://www.youtube.com/embed/tZeMfF45Gmc"}[t]))(t||"id01"),i.classList.add("modal--active"),i.addEventListener("click",r),(()=>{const t=()=>{document.body.dataset.scrollY=window.scrollY;let t=window.innerWidth-document.body.offsetWidth;console.log("scrollWidth: ",t),document.body.style.cssText=`\n      position: fixed;\n      top: -${window.scrollY}px;\n      left: 0;\n      width: 100%;\n      overflow: hidden;\n      height: 100vh;\n      padding-right: ${t}px;\n   `};t(),window.addEventListener("resize",t)})()},r=t=>{t.target.closest(".modal__inner")||(i.classList.remove("modal--active"),n.src="",e&&e.removeEventListener("click",o)),document.body.style.cssText="",window.scroll({top:document.body.dataset.scrollY})};e?e.addEventListener("click",o):s.addEventListener("click",o)},e=new class{constructor({sliderWrap:t,sliderItems:e,slidesToShow:i=3,position:s=0,addClassName:n=!1,btnNext:o,responsive:r=[]}){this.sliderWrap=document.querySelector(t),this.sliderItems=document.querySelector(e),this.slides=this.sliderItems.children,this.slidesToShow=i,this.widthSlide=100/this.slidesToShow,this.addClassName=n,this.position=s,this.responsive=r,this.btnNext=document.querySelector(o),this.firstSlide=this.slides[0],this.lastSlide=this.slides[this.slides.length-1],this.swipeStart=this.dragStart.bind(this),this.swipeEnd=this.dragEnd.bind(this),this.swipeAction=this.dragMove.bind(this),this.isDrag=!1,this.animationId="",this.timerId="",this.timeTransform=".6",this.startPosition=0,this.currentTranslate=0,this.prevTranslate=0,this.moving=this.widthSlide/10,this.blockSlide=!1}cloneSlides(){this.slides.length<=this.slidesToShow&&[...this.slides].forEach((t=>this.sliderItems.append(t.cloneNode(!0))));const t=this.firstSlide.cloneNode(!0),e=this.lastSlide.cloneNode(!0);this.sliderItems.append(t),this.sliderItems.insertAdjacentElement("afterBegin",e)}addStyle(){let t=document.getElementById(`${this.addClassName}-style`);t||(t=document.createElement("style"),t.id=`${this.addClassName}-style`),t.textContent=`\n      .${this.addClassName} {\n         min-width: calc(${this.widthSlide}% - 2.7rem);\n         cursor: pointer;\n         touch-action: none;\n      }\n      `,document.head.append(t)}addClass(){for(const t of[...this.slides])t.classList.add(`${this.addClassName}`)}getPositionX(t){return t.pageX}dragStart(t){this.sliderItems.ondragstart=()=>!1,t.target.closest(`.${this.addClassName}`)&&(this.sliderItems.addEventListener("pointerup",this.swipeEnd),this.sliderItems.addEventListener("pointermove",this.swipeAction),this.sliderItems.addEventListener("pointerleave",this.swipeEnd),this.isDrag=!0,this.animationId=requestAnimationFrame(this.animation.bind(this)),this.startPosition=this.getPositionX(t))}dragMove(t){if(this.isDrag){const e=this.getPositionX(t);this.currentTranslate=this.prevTranslate-(e-this.startPosition)/this.startPosition*this.widthSlide}}dragEnd(e){if(this.isDrag=!1,this.currentTranslate===this.prevTranslate&&e.target.closest(".trailers__slider-item")){const i=e.target.closest(".trailers__slider-item").getAttribute("data-trailer"),s=e.target.closest(`.${this.addClassName}`);t(i,s)}const i=this.currentTranslate-this.prevTranslate;i<-this.moving&&!this.blockSlide?(this.blockSlide=!0,this.prevSlide()):i>this.moving&&!this.blockSlide?(this.blockSlide=!0,this.nextSlide()):this.currentTranslate=this.prevTranslate,cancelAnimationFrame(this.animationId),this.sliderItems.removeEventListener("pointerup",this.swipeEnd),this.sliderItems.removeEventListener("pointermove",this.swipeAction),this.sliderItems.removeEventListener("pointerleave",this.swipeEnd)}nextSlide(){this.position<this.slides.length-1&&(this.setPosition(this.timeTransform,"+"),this.position>this.slides.length-2&&this.resetSlide(1))}prevSlide(){this.position>0&&(this.setPosition(this.timeTransform,"-"),this.position<1&&this.resetSlide(this.slides.length-1))}resetSlide(t){clearTimeout(this.timerId),this.setPosition(this.timeTransform),this.position=t,this.timerId=setTimeout((()=>{this.setPosition(0),this.blockSlide=!1}),600)}setPosition(t,e){e&&("+"===e?++this.position:--this.position),this.mobilePosition?this.currentTranslate=this.position*this.widthSlide:this.currentTranslate=(this.position-1)*this.widthSlide,this.prevTranslate=this.currentTranslate,this.sliderItems.style.transition=`transform ${t}s`,this.moveSlider();const i=()=>{this.blockSlide=!1,this.sliderItems.removeEventListener("transitionend",i)};this.sliderItems.addEventListener("transitionend",i)}moveSlider(){this.sliderItems.style.transform=`translateX(-${this.currentTranslate}%)`}animation(){this.moveSlider(),this.isDrag&&requestAnimationFrame(this.animation.bind(this))}controlSlider(){this.sliderItems.addEventListener("pointerdown",this.swipeStart),this.btnNext.addEventListener("click",(()=>{this.blockSlide=!0,this.nextSlide()}))}init(){this.addClass(),this.cloneSlides(),this.controlSlider(),this.responseInit()}responseInit(){const t=this.slidesToShow,e=this.responsive.map((t=>t.breakpoint)),i=Math.max(...e),s=()=>{const s=document.documentElement.clientWidth;if(s<i)for(let t=0;t<e.length;t++)s<e[t]&&(this.slidesToShow=this.responsive[t].slidesToShow,this.widthSlide=100/this.slidesToShow,this.addStyle(),this.moving=this.widthSlide/20,this.setPosition());else this.slidesToShow=t,this.widthSlide=100/this.slidesToShow,this.addStyle(),this.moving=this.widthSlide/10,this.setPosition()};s(),window.addEventListener("resize",s)}}({sliderWrap:".trailers__wrap",sliderItems:".trailers__slider",slidesToShow:2,position:2,addClassName:"slider-item",btnNext:".trailers__slider-btn",responsive:[{breakpoint:480,slidesToShow:1}]});(t=>{const e=new Image;e.onload=e.onerror=function(){!function(t){const e=!0===t?"webp":"no-webp";document.documentElement.classList.add(e)}(2==e.height)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"})(),(()=>{const t=document.querySelector(".header__menu-burger"),e=document.querySelector(".header__wrap"),i=t=>{(t.target.closest(".header__menu-close")||t.target.closest(".header__logo")||t.target.closest("a")||!t.target.closest(".header__container"))&&(e.style.display="none")};t.addEventListener("click",(()=>{e.style.display="flex",document.addEventListener("click",i)}))})(),t(),((t=".main__rating-stars")=>{const e=document.querySelector(t),i=[...e.children],s=document.querySelector(".rating-positive");let n=localStorage.getItem("rating")?JSON.parse(localStorage.getItem("rating")):0;const o=t=>{s.textContent=t,i.forEach(((e,i)=>{t>i?e.classList.add("star--active"):e.classList.remove("star--active")}))},r=t=>{let e=i.indexOf(t.target.closest(".main__rating-star"));e>-1&&"click"===t.type?(localStorage.setItem("rating",JSON.stringify(e+1)),o(e+1),n=localStorage.getItem("rating")?JSON.parse(localStorage.getItem("rating")):0):e>-1&&"mouseover"===t.type&&o(e+1)};o(n),e.addEventListener("mouseover",r),e.addEventListener("click",r),e.addEventListener("mouseout",(()=>o(n)))})(),e.init()})();